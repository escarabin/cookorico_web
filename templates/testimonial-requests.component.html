<h2 class="centered">
    Vos demandes de recommandation
    <hr />
</h2>
<div class="col-md-12 header-container">
    <div class="col-md-12 col-sm-12 col-xs-11 items-count">
        {{ testimonials.length }} demande<span *ngIf="testimonials.length > 1">s</span> de recommandation
    </div>
</div>

<div class="col-md-12 list-container">
    <ul>
        <li *ngFor="let testimonial of testimonials"
            class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 item"
                 [class.logo]="testimonial.employee.profilePictureUrl">
                <div class="col-md-2 col-sm-2 hidden-xs" *ngIf="testimonial.employee.profilePictureUrl">
                    <img src="{{ testimonial.employee.profilePictureUrl }}"
                         class="full-width"/>
                </div>
                <div [class.col-md-6]="testimonial.employee.profilePictureUrl"
                     [class.col-md-8]="!testimonial.employee.profilePictureUrl"
                     [class.col-sm-6]="testimonial.employee.profilePictureUrl"
                     [class.col-sm-8]="!testimonial.employee.profilePictureUrl"
                     class="col-xs-9">
                    <h3>{{ testimonial.employee.firstName }} {{ testimonial.employee.lastName }}</h3>
                    <a routerLink="/profil/apercu/{{ testimonial.employee.id }}">
                        Voir le profil
                    </a> <br />
                    {{ testimonial.request_content.substr(0, 240) }}<br />
                </div>
                <div class="col-md-4 centered">
                    <span class="date">
                        Reçu le {{ testimonial.created_at | date:"dd/MM/yy" }}
                    </span>
                </div>
                <div class="col-md-2 col-sm-2 col-xs-3 centered">
                    <button class="btn btn-primary full-width"
                            (click)="acceptRequest(testimonial.id)">
                        Accepter
                    </button>
                </div>
                <div class="col-md-2 col-sm-2 col-xs-3 centered">
                    <button class="btn btn-danger full-width"
                            (click)="rejectRequest(testimonial.id)">
                        Refuser
                    </button>
                </div>
            </div>
        </li>
    </ul>
</div>

<div class="col-md-12 header-container greyed">
    <div class="col-md-12 col-sm-12 col-xs-11 items-count">
        {{ accepted_testimonial_requests.length }} candidat
        <span *ngIf="accepted_testimonial_requests.length > 1">s</span>
        recommandé<span *ngIf="accepted_testimonial_requests.length > 1">s</span>
    </div>
</div>

<div class="col-md-12 list-container">
    <ul>
        <li *ngFor="let testimonial of accepted_testimonial_requests"
            class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 item"
                 [class.logo]="testimonial.employee.profilePictureUrl">
                <div class="col-md-2 col-sm-2 hidden-xs" *ngIf="testimonial.employee.profilePictureUrl">
                    <img src="{{ testimonial.employee.profilePictureUrl }}"
                         class="full-width"/>
                </div>
                <div [class.col-md-6]="testimonial.employee.profilePictureUrl"
                     [class.col-md-8]="!testimonial.employee.profilePictureUrl"
                     [class.col-sm-6]="testimonial.employee.profilePictureUrl"
                     [class.col-sm-8]="!testimonial.employee.profilePictureUrl"
                     class="col-xs-9">
                    <h3>{{ testimonial.employee.firstName }} {{ testimonial.employee.lastName }}</h3>
                    <a routerLink="/profil/apercu/{{ testimonial.employee.id }}">
                        Voir le profil
                    </a> <br />
                    {{ testimonial.request_content.substr(0, 240) }}<br />
                </div>
                <div class="col-md-4 centered">
                    <span class="date">
                        Recommandé le {{ testimonial.updated_at | date:"dd/MM/yy" }}
                    </span>
                </div>
            </div>
        </li>
    </ul>
</div>

<div class="col-md-12 header-container greyed">
    <div class="col-md-12 col-sm-12 col-xs-11 items-count">
        {{ rejected_testimonial_requests.length }} demande
        <span *ngIf="rejected_testimonial_requests.length > 1">s</span>
        refusée<span *ngIf="rejected_testimonial_requests.length > 1">s</span>
    </div>
</div>

<div class="col-md-12 list-container">
    <ul>
        <li *ngFor="let testimonial of rejected_testimonial_requests"
            class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 item"
                 [class.logo]="testimonial.employee.profilePictureUrl">
                <div class="col-md-2 col-sm-2 hidden-xs" *ngIf="testimonial.employee.profilePictureUrl">
                    <img src="{{ testimonial.employee.profilePictureUrl }}"
                         class="full-width"/>
                </div>
                <div [class.col-md-6]="testimonial.employee.profilePictureUrl"
                     [class.col-md-8]="!testimonial.employee.profilePictureUrl"
                     [class.col-sm-6]="testimonial.employee.profilePictureUrl"
                     [class.col-sm-8]="!testimonial.employee.profilePictureUrl"
                     class="col-xs-9">
                    <h3>{{ testimonial.employee.firstName }} {{ testimonial.employee.lastName }}</h3>
                    <a routerLink="/profil/apercu/{{ testimonial.employee.id }}">
                        Voir le profil
                    </a> <br />
                    {{ testimonial.request_content.substr(0, 240) }}<br />
                </div>
                <div class="col-md-4 centered">
                    <span class="date">
                        Demande refusée le {{ testimonial.updated_at | date:"dd/MM/yy" }}
                    </span>
                </div>
            </div>
        </li>
    </ul>
</div>